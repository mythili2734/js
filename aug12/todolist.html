<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" name="" id="task" placeholder="Enter task">
    <button id="btn">Add task</button>
    <ol id="taskList"></ol>
    <script>
        //creating reference variables
        let task=document.getElementById("task");
        let btn = document.getElementById("btn");
        let taskList=document.getElementById("taskList");

        //To retrive and display tasks in local storage
        window.onload=function(){
            let availableTasks=JSON.parse(localStorage.getItem("tasks") ||"[]");
            availableTasks.forEach(x => {
                displayTasks(x);
            });
        }

        //To display tasks on page load
        function displayTasks(task){
            let newTask = document.createElement("li");
            newTask.innerText = task;

            let button = document.createElement("button");
            button.innerText="Delete";
            button.addEventListener("click",function(){
                newTask.remove();               //To remove task from DOM
                removeTask(task);
            })
            newTask.appendChild(button);
            taskList.appendChild(newTask)
        }

        //Adding task to DOM as well as localStorage
        btn.addEventListener("click",function(){
            if(task.value.trim()==""){
                return
            }
            let y=task.value;         
            let newTask = document.createElement("li");
            newTask.innerText=y;

            let button = document.createElement("button");
            button.innerText="Delete";
            button.addEventListener("click",function(){
                newTask.remove();                           //TO remove task from DOM
                removeTask(y);
            })

            newTask.appendChild(button);

            taskList.appendChild(newTask);

            let availableTasks=JSON.parse(localStorage.getItem("tasks") || "[]");   //to check for any available tasks
            availableTasks.push(task.value);
            localStorage.setItem("tasks",JSON.stringify(availableTasks));
            task.value="";
        })

        //To remove task local storage
        function removeTask(task){
            let availableTasks = JSON.parse(localStorage.getItem("tasks"));
            availableTasks=availableTasks.filter(x=>x !== task);
            localStorage.setItem("tasks",JSON.stringify(availableTasks));
        }

        // let a=[1,2,3,4,5]
        // a=a.filter(x=>x!==2)
        // console.log(a)
    </script>
</body>
</html>

<!-- 1.AddTask-Adding task to dom,adding task to localStorage
2.DeleteTask-Delete task from dom,delete task from local storage -->